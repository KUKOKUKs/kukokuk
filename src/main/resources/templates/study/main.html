<!DOCTYPE html>
<html layout:decorate="~{layout/base}"
      th:with="menu='study',
      title='오늘의 학습',
      user=${#authentication.principal.user},
      isSetStudyLevel=${user != null
                      && user.studyDifficulty != null
                      && user.currentSchool != null
                      && user.currentGrade != null}">
<div layout:fragment="content">
    <div id="main-content" class="content_container">
        <div class="content_info toggle_info_component second">
            <div class="content_title">
                <iconify-icon icon="fluent-color:book-open-24"></iconify-icon>
                오늘의 학습

                <!--/*
                    그룹에 속해 있을 경우 일반/우리반 토글 스위치 노출
                    오늘의 학습에서는 무조건 일반 먼저 노출(우리반 자료 없을 경우 컨텐츠가 비어보임)
                */-->
                <div th:if="${user?.groupNo != null}"
                     class="content_switcher switch_toggle_btn on"
                     data-before="우리반"
                     data-after="일반">
                    <div class="toggle_switch"></div>
                </div>
            </div>

            <!--/* 그룹에 속한 사용자 */-->
            <th:block th:if="${user?.groupNo != null}">
                <div th:replace="~{fragments/study/group-study-list :: group-study-list-fragment(groupStudyRows=5, isUseSpinner=false)}"></div>
            </th:block>

            <!--/* 학습 진도/단계 설정이 필요한 경우 */-->
            <div class="component elevate_on_hover toggle_info_second"
                 th:if="${!isSetStudyLevel}">
                <button type="button"
                        class="modal_study_level_btn component_title justify_content_center pd_base tac">
                    <div class="title_info">
                        학습 수준을 설정하고 오늘의 학습을 시작해볼까요?
                    </div>
                </button>
            </div>

            <!--/* 학습 진도/단계 설정이 완료된 경우 컨텐츠 추가 */-->
            <th:block th:if="${isSetStudyLevel}">
                <div th:replace="~{fragments/study/study-list :: study-list-fragment(studyRows=5, isUseSpinner=false)}"></div>
            </th:block>
        </div>
    </div>

    <div id="sub-content" class="content_container">
        <th:block th:replace="~{fragments/common/profile :: profile-fragment}"></th:block>
        <th:block th:replace="~{fragments/common/quest :: quest-fragment}"></th:block>
        <th:block th:replace="~{fragments/study/study-history :: study-history-fragment(dailyStudyLogs=${dailyStudyLogs})}"></th:block>
    </div>
</div>
</html>
<!DOCTYPE html>
<html layout:decorate="~{/layout/base}"
      th:with="menu='study',
      title='오늘의 학습',
      user=${#authentication.principal.user},
      isSetStudyLevel=${user != null
                      && user.studyDifficulty != null
                      && user.currentSchool != null
                      && user.currentGrade != null}">
<div layout:fragment="content">
    <div id="main-content" class="content_container">
        <div class="content_info">
            <div class="content_title">
                <iconify-icon icon="fluent-color:book-open-24"></iconify-icon>
                오늘의 학습

                <!--/* 그룹에 속해 있을 경우 일반/우리반 토글 스위치 노출 */-->
                <div th:if="${user?.groupNo != null}"
                     class="content_switcher switch_toggle_btn on"
                     data-before="일반"
                     data-after="우리반">
                    <div class="toggle_switch"></div>
                </div>
            </div>

            <!--/* 학습 진도/단계 설정이 필요한 경우 */-->
            <div class="component elevate_on_hover"
                 th:if="${!isSetStudyLevel}">
                <button type="button"
                        class="modal_study_level_btn component_title justify_content_center pd_base tac">
                    <div class="title_info">
                        학습 수준을 설정하고 오늘의 학습을 시작해볼까요?
                    </div>
                </button>
            </div>

            <!--/* 학습 진도/단계 설정이 완료된 경우 컨텐츠 추가 */-->
            <div class="small_list_component study_list_container"
                 th:if="${isSetStudyLevel}"
                 th:data-is-study-level-set="${isSetStudyLevel}"></div>
        </div>
    </div>

    <div id="sub-content" class="content_container">
        <th:block th:replace="~{fragments/common/profile :: profile-fragment}"></th:block>
        <th:block th:replace="~{fragments/common/quest :: quest-fragment}"></th:block>
        <th:block th:replace="~{fragments/study/study-history :: study-history-fragment(studyHistory=${data})}"></th:block>
    </div>
</div>

<th:block layout:fragment="script">
    <script type="module" th:src="@{/js/modules/study/study.js}"></script>
</th:block>
</html>